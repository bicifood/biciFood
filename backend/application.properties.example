# üö¥‚Äç‚ôÇÔ∏è BiciFood API - Configuraci√≥ d'Exemple
# Copia aquest fitxer a application.properties i personalitza les configuracions

# =============================================================================
# CONFIGURACI√ì DE LA BASE DE DADES
# =============================================================================

# Connexi√≥ a MySQL (amb Docker Compose)
spring.datasource.url=jdbc:mysql://localhost:3306/bicifood_db?useSSL=false&serverTimezone=Europe/Madrid&allowPublicKeyRetrieval=true&characterEncoding=utf8&useUnicode=true
spring.datasource.username=bicifood_user
spring.datasource.password=bicifood_password
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Pool de connexions HikariCP
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.connection-test-query=SELECT 1

# =============================================================================
# CONFIGURACI√ì JPA/HIBERNATE  
# =============================================================================

# Configuraci√≥ Hibernate per desenvolupament
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true
spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect

# Configuraci√≥ de l'engine de persist√®ncia
spring.jpa.properties.hibernate.connection.CharSet=utf8mb4
spring.jpa.properties.hibernate.connection.characterEncoding=utf8
spring.jpa.properties.hibernate.connection.useUnicode=true

# =============================================================================
# CONFIGURACI√ì DEL SERVIDOR
# =============================================================================

# Port i context path
server.port=8080
server.servlet.context-path=/api

# Configuraci√≥ d'encoding
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true

# =============================================================================
# CONFIGURACI√ì DE LOGGING
# =============================================================================

# Nivells de logging per desenvolupament
logging.level.com.bicifood=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Configuraci√≥ dels logs
logging.file.name=logs/bicifood-api.log
logging.logback.rollingpolicy.file-name-pattern=logs/bicifood-api-%d{yyyy-MM-dd}.%i.log
logging.logback.rollingpolicy.max-file-size=10MB
logging.logback.rollingpolicy.total-size-cap=1GB
logging.logback.rollingpolicy.max-history=30

# =============================================================================
# CONFIGURACI√ì JWT (per implementar)
# =============================================================================

# Clau secreta per signar tokens JWT (canvia-la per producci√≥!)
jwt.secret=bicifood-secret-key-change-this-in-production-2024
jwt.expiration=86400000
jwt.refresh.expiration=604800000

# =============================================================================
# CONFIGURACI√ì DE CORS
# =============================================================================

# URLs permeses per CORS (frontend applications)
cors.allowed-origins=http://localhost:3000,http://localhost:4200,http://localhost:5173
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
cors.allowed-headers=*
cors.allow-credentials=true

# =============================================================================
# CONFIGURACI√ì SPRING SECURITY
# =============================================================================

# Configuraci√≥ per desenvolupament (m√©s permissiva)
security.debug=true
spring.security.user.name=admin
spring.security.user.password=admin123

# =============================================================================
# CONFIGURACI√ì DE SPRING ACTUATOR
# =============================================================================

# Endpoints de monitoritzaci√≥
management.endpoints.web.exposure.include=health,info,metrics,env
management.endpoint.health.show-details=always
management.info.env.enabled=true

# =============================================================================
# CONFIGURACI√ì D'APLICACI√ì PERSONALITZADA
# =============================================================================

# Informaci√≥ de l'aplicaci√≥
info.app.name=BiciFood API
info.app.description=API REST per la plataforma de lliurament sostenible BiciFood
info.app.version=1.0.0
info.app.encoding=UTF-8
info.app.java.version=${java.version}

# Configuraci√≥ de l'aplicaci√≥
bicifood.app.default-language=ca
bicifood.app.timezone=Europe/Madrid
bicifood.app.currency=EUR

# Configuraci√≥ de fitxers
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# =============================================================================
# CONFIGURACI√ì ESPEC√çFICA PER ENTORNS
# =============================================================================

# Per activar perfils espec√≠fics descomenta la l√≠nia seg√ºent:
# spring.profiles.active=dev

# PERFIL DE DESENVOLUPAMENT
---
spring.config.activate.on-profile=dev
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
logging.level.org.hibernate.SQL=DEBUG
security.debug=true

# PERFIL DE TEST  
---
spring.config.activate.on-profile=test
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driver-class-name=org.h2.Driver
spring.jpa.hibernate.ddl-auto=create-drop
logging.level.org.hibernate.SQL=WARN

# PERFIL DE PRODUCCI√ì
---
spring.config.activate.on-profile=prod
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
logging.level.org.hibernate.SQL=WARN
security.debug=false

# =============================================================================
# NOTES IMPORTANTS
# =============================================================================

# 1. CANVIA la contrasenya de MySQL per producci√≥
# 2. CANVIA la clau JWT per producci√≥  
# 3. CONFIGURA les URLs de CORS per al teu frontend
# 4. AJUSTA els nivells de logging per producci√≥
# 5. USA variables d'entorn per dades sensibles en producci√≥:
#    Exemple: spring.datasource.password=${DB_PASSWORD}

# =============================================================================
# VARIABLES D'ENTORN RECOMANADES PER PRODUCCI√ì
# =============================================================================

# DB_HOST=localhost
# DB_PORT=3306  
# DB_NAME=bicifood_db
# DB_USERNAME=bicifood_user
# DB_PASSWORD=secure_password_here
# JWT_SECRET=very_secure_jwt_secret_here
# FRONTEND_URL=https://bicifood.cat